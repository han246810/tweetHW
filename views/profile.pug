extends layout

block content
  .container
    .col-2of5.bg-white.profile
      img.avatar(src=user.avatarUrl alt="avatar")
      h3 #{user.name}
      //- h3 #{tweets[0].author.name}
      h5 @#{user.username}
      h4
        i.fas.fa-map-marker-alt
        |  Vancouver
      p.center
        | Director of EduHacks * Digital Ocean Vancouver Meetup Co-organizer * CEO of HackHub * Founder of Inverse Technology Inc.
      a.btn-border.space-top(href="/profile/edit") Edit profile
      a.btn-border.space-top(href="/logout") Log out
    .col-3of5.bg-white
      .tweet
        form(action="/profile/newTweet" method="POST")
          .row
            img.avatar-sm.v-top(src=user.avatarUrl alt="avatar")
            textarea.input-tweet(placeholder="What's up?" name="tweetContent")
          .row.tweet-actions
            input.hidden(type="file")
            button.btn-clear
              i.far.fa-image
            button.btn-primary Post
      each tweet in tweets
        .tweet
          .row
            img.avatar-sm(src=tweet.author.avatarUrl alt="avatar")
            h4
              b=tweet.author.name
            h5=`@${tweet.author.username}`
            h5=moment(tweet.createdAt).format('MMMM D, YYYY hh:mm A')
            //- button(type='button' class='editTweet') Edit Tweet
            //button(type='button' class='deleteTweet') Delete Tweet
            //- a.btn-border.space-top(href=`/profile/editTweet/?tweetId=${tweet._id}`) Edit Tweet
            a.fas.fa-edit.editTweet(href=`/profile/editTweet?tweetId=${tweet._id}`) 
            //- a.btn-border.space-top.deleteTweet(href=`/profile/deleteTweet/?tweetId=${tweet._id}`) Delete Tweet
            button.editTweet.fa.fa-trash(type='button'  onclick=`deleteConfirm("${tweet._id}")`) 
           
          p=tweet.content
            if (tweet.imageUrl)
              img(src=tweet.imageUrl alt="tweet")

block script
  script.
          //- function deleteConfirm(tweetId){
          //-   alert(tweetId);
          //- }
       deleteConfirm =(tweetId)=>{
        var txt;
        var r = confirm("Confirm to delete tweet?");
        if (r == true) {
            //- alert("ok!");  /profile/editTweet?tweetId=${tweet._id}`  `/profile/deleteTweet?tweetId=${tweet._id}`
            //- alert("ok!");
            
            //- alert(tweetId);
            window.location.href = `/profile/deleteTweet?tweetId=${tweetId}`;
        } else {
            alert("You pressed Cancel!");
        }
            //- document.getElementById("demo").innerHTML = txt;
            
    };
